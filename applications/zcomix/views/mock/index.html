{{extend 'layout.html'}}
<div id="front_page">

<div class="row-fluid" id="top_section">
<div class="span4 offset8">
    {{=LOAD(c='search', f='box', extension='load', ajax=False, content='')}}
</div>
</div>

<div class="row-fluid" id="intro_section">
<div class="span7" id="intro">
This is a not-for-profit site dedicated to promoting self-publishing comic
creators. It's also an attempt to help readers by organizing content produced
by these creators.
</div>
</div>

<div class="row-fluid" id="middle_section">
<div class="span12" id="top_10_heading">
    <ul class="nav nav-tabs">
    {{orderbys = ['views', 'newest']}}
    {{orderby = request.vars.o if request.vars.o in orderbys else orderbys[0]}}
    {{for o in orderbys:}}
        <li class="nav-tab {{if o == orderby:}}active{{pass}}">
            {{orderby_vars = dict(request.vars)}}
            {{orderby_vars['o'] = o}}
            <a href="{{=URL(r=request, vars=orderby_vars)}}">{{=o}}</a>
        </li>
    {{pass}}
    </ul>
</div>
<table>
    <tr>
        <td>
<ul>
    <li>
<a href="{{=URL(f=request.function, vars={'view': 'ratio_grid', 'square': 120, 'shrink': 75}, extension=False)}}">Ratio algorithm (120px/75%)</a>
    </li>
    <li>
<a href="{{=URL(f=request.function, vars={'view': 'area_grid', 'ideal': 85}, extension=False)}}">Area algorithm (85)</a>
    </li>
</ul>
        </td>
        <td>
<ul>
    <li>
    {{sorted_vars = dict(request.vars)}}
    {{sorted_vars['random'] = ''}}
<a href="{{=URL(f=request.function, vars=sorted_vars, extension=False)}}">Sorted</a>
    </li>
    <li>
    {{random_vars = dict(request.vars)}}
    {{random_vars['random'] = '1'}}
<a href="{{=URL(f=request.function, vars=random_vars, extension=False)}}">Random</a>
    </li>
</ul>
        </td>
    </tr>
</table>
</div>
<div id="grid_section">
{{func = request.vars.view or 'front_grid'}}
{{=LOAD(c='mock', f=func, args=request.args, vars=request.vars, extension='load', ajax=True)}}
</div>
</div>
